<!DOCTYPE html> 

<html lang="es"> 

    <head>

        <meta charset="UTF-8">
        <title>Encriptador</title>
        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">

    </head>

    <body>
        <header>

            <h1 class="logo"><img src="imagenes/logo-alura.png" alt="Logo de alura"></h1>

        </header>
        
            <div class="entrada">
                <input class="mensaje" placeholder="Ingrese texto aquí">

                <img src="imagenes/exclamacion.png" class="simbolo"><p class="importante">Sólo letras minúsculas y sin acentos</p>

                <button class="encriptar">Encriptar</button>
    
                <button class="desencriptar">Desencriptar</button>
            </div>

            <div class="salida">
                <textarea class="mensajeSalida" readonly></textarea>
                
                <button class="copiar">Copiar</button>
            </div>
               

    </body>
</html>
<script>

    var input = document.querySelector(".mensaje");
	input.focus();
    var output = document.querySelector(".mensajeSalida");

    //funcion para transformar un var array para var string
    function arrayToString(array){

        var frase = array.join("");
        return frase;
        
    }

    //funcion para detectar no minusculas
    function detectarNoMinusculas(array){
        var i = 0;
        while(i <= array.length){
            var pattern = new RegExp("^(?=.*[a-z])");
            if(pattern.test(array[i])){
                i++
            }else{
                return true;
                break;
            }
            return false;
        }
    }

    //funcion para encriptar
    function encriptando(){
        var letras = [];
        if(input.value != "" ){
            letras = Array.from(input.value);
            if(detectarNoMinusculas(letras)){
                alert("Existen mayúsculas, números o símbolos especiales en la frase.  Vuelva a ingresar otra.")
            }else{
                for(var i = 0; i <= letras.length; i++){
                    if(letras[i] == "a"){
                        letras[i] = "ai"
                        }else{
                            if(letras[i] == "e"){
                            letras[i] = "enter"
                            }else{
                                if(letras[i] == "i"){
                                letras[i] = "imes"
                                }else{
                                    if(letras[i] == "o"){
                                    letras[i] = "ober"
                                    }else{
                                        if(letras[i] == "u"){
                                        letras[i] = "ufat"
                                        }
                                    }
                                }
                            }
                        }
                    }
            
                    output.value = (arrayToString(letras));
                }
            }else{
                alert("Escriba un mensaje...");
            }
            input.value = "";
		    input.focus();
        }

    //funcion para desencriptar
    function desencriptando(){
        var letras = [];
        if(input.value != "" ){
            letras = Array.from(input.value);
            if(detectarNoMinusculas(letras)){
                alert("Existen mayúsculas, números o símbolos especiales en la frase.  Vuelva a ingresarla.")
            }else{
                for(var i = 0; i <= letras.length; i++){
                    if(letras[i] == "a"){
                        letras.splice(i+1,1);
                        }else{
                            if(letras[i] == "e"){
                                letras.splice(i+1,4);
                            }else{
                                if(letras[i] == "i"){
                                    letras.splice(i+1,3);
                                }else{
                                    if(letras[i] == "o"){
                                        letras.splice(i+1,3);
                                    }else{
                                        if(letras[i] == "u"){
                                            letras.splice(i+1,3);
                                        }
                                    }
                                }
                            }
                        }
                    }
            
                    output.value = (arrayToString(letras));
                }
            }else{
                alert("Escriba un mensaje...");
            }
            input.value = "";
		    input.focus();
        }
        
    //funcion para copiar texto de salida
    function copiar(){
        var mensajeCopiado = document.querySelector(".mensajeSalida");
        mensajeCopiado.select();
        mensajeCopiado.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(mensajeCopiado.value);
    }

    var botonEncriptar = document.querySelector(".encriptar");
    botonEncriptar.onclick = encriptando;

    var botonDesencriptar = document.querySelector(".desencriptar");
    botonDesencriptar.onclick = desencriptando;

    var botonCopiar = document.querySelector(".copiar");
    botonCopiar.onclick = copiar;


</script>
